<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="primefaces">

<ui:composition template="/templates/template.xhtml">
    <ui:define name="title">Cadastro de Livro</ui:define>

    <ui:define name="content">
        <div class="card" style="max-width: 800px; margin: 0 auto;">
            <h2>Novo Livro</h2>

            <h:form>
                <p:messages id="msgs" showDetail="true" closable="true">
                    <p:autoUpdate/>
                </p:messages>

                <div class="ui-fluid p-formgrid p-grid">

                    <div class="p-field p-col-12 p-md-6">
                        <p:outputLabel for="titulo" value="Título" />
                        <p:inputText id="titulo" value="#{livroCadastroBean.livro.titulo}" required="true" />
                    </div>

                    <div class="p-field p-col-12 p-md-6">
                        <p:outputLabel for="isbn" value="ISBN" />
                        <p:inputText id="isbn" value="#{livroCadastroBean.livro.isbn}" />
                    </div>

                    <div class="p-field p-col-12 p-md-6">
                        <p:outputLabel for="autor" value="Autor" />
                        <p:selectOneMenu id="autor" value="#{livroCadastroBean.autorIdSelecionado}" required="true" label="Autor">
                            <f:selectItem itemLabel="Selecione um autor" itemValue="" noSelectionOption="true"/>
                            <f:selectItems value="#{livroCadastroBean.listaAutores}" var="a"
                                           itemLabel="#{a.nome}" itemValue="#{a.id}"/>
                        </p:selectOneMenu>
                    </div>

                    <div class="p-field p-col-12 p-md-6">
                        <p:outputLabel for="paginas" value="Número de Páginas" />
                        <p:spinner id="paginas" value="#{livroCadastroBean.livro.numeroPaginas}" min="1" />
                    </div>

                    <div class="p-field p-col-12 p-md-6">
                        <p:outputLabel for="dataPub" value="Data Publicação" />
                        <p:datePicker id="dataPub" value="#{livroCadastroBean.livro.dataPublicacao}" showIcon="true" pattern="dd/MM/yyyy"/>
                    </div>
                </div>

                <div style="margin-top: 20px;">
                    <p:commandButton value="Salvar" action="#{livroCadastroBean.salvar}" update="@form" icon="pi pi-check" styleClass="ui-button-success" />
                    <p:button value="Voltar" outcome="/livros.xhtml" icon="pi pi-arrow-left" styleClass="ui-button-secondary" style="margin-left: 10px;"/>
                </div>
            </h:form>
        </div>
    </ui:define>
</ui:composition>
</html>